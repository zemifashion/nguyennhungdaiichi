!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=35)}({1:function(t,e){t.exports=jQuery},29:function(t,e,s){"use strict";(function(t){s.d(e,"a",function(){return i});class i{constructor(){this.$testerForm=null,this.$resultsContainer=null,this.$testHistory=null,this.inputIdSiteId="#site_id",this.inputIdTestType="#test_type",this.inputIdTestUrlPart="#test_url_part",this.selectorToggle=".toggle",this.classToggleable="toggleable",this.selectorButtonTestThis="button.test-this",this.toggleCache={},this.isTestHistoryHidden=!1,this.$testerForm=t("#tester-form"),this.$resultsContainer=t("#test-results"),this.$testHistory=t("#test-history"),this.$testerForm.on("submit",t=>this.onSubmitTesterForm(t)),this.$testHistory.on("click",".wcc-remove",t=>this.onRemoveTestHistoryItem(t)),this.$testHistory.on("click",".delete-all",t=>this.onRemoveAllTestHistoryItems(t)),this.$testHistory.on("click","h2",()=>this.toggleTestHistory()),this.$testHistory.on("click",".wcc-test",t=>this.onClickTestButtonInTestHistory(t)),this.$resultsContainer.on("click",".go-to-top",t=>this.onClickGoToTop(t)),this.$resultsContainer.on("click","#go-to-details",t=>this.onClickGoToDetails(t)),this.$resultsContainer.on("click",this.selectorButtonTestThis,t=>this.onClickTestThis(t)),t(document).on("click",this.selectorToggle,t=>this.toggleToggleable(t))}toggleToggleable(e){e.preventDefault();let s=t(e.target).next()||null;if(null===s||!s.length||!s.hasClass(this.classToggleable))return;let i=s.attr("id")||null;null!==i&&i.length&&(s.hasClass("hidden")?(s.removeClass("hidden"),this.toggleCache[i]=!0):(s.addClass("hidden"),this.toggleCache[i]=!1))}restoreToggleableStates(){let e,s;for(let i in this.toggleCache)this.toggleCache.hasOwnProperty(i)&&null!==(e=t("#"+i)||null)&&e.length&&((s=this.toggleCache[i])?e.removeClass("hidden"):e.addClass("hidden"))}onClickTestThis(e){e.preventDefault();let s=t(e.target).closest(this.selectorButtonTestThis);this.$testerForm.find(this.inputIdTestUrlPart).val(s.data("url")),this.$testerForm.find(this.inputIdTestType).val(s.data("type")),this.$testerForm.submit()}onClickGoToDetails(e){e.preventDefault(),t("html, body").animate({scrollTop:t("#details").offset().top-40},"slow")}onClickGoToTop(e){e.preventDefault(),t("html, body").animate({scrollTop:0},"slow")}onClickTestButtonInTestHistory(e){e.preventDefault();let s=t(e.target),i=this.getTestHistoryData(s);if(null===i||!i.exists)return;let o=i.siteId||null,n=i.testKey||null,l=i.testUrl||null;null!==o&&null!==n&&null!==l&&(this.$testerForm.find(this.inputIdTestUrlPart).val(l),this.$testerForm.find(this.inputIdTestType).val(n),this.$testerForm.find(this.inputIdSiteId).val(o),this.$testerForm.submit())}onRemoveAllTestHistoryItems(e){e.preventDefault(),window.confirm(window.wpcc.delete_all_test_history)&&(this.setHistoryLoading(!0),t.post(window.ajaxurl,{wcc_nonce:t("#wcc_nonce").val(),action:window.pageActionKey,data:{cmd:"delete_all_test_history"}}).done(e=>{let s=t(e.view).find(".inside").first();this.$testHistory.find(".inside").html(s.html())}).fail(t=>{console.log(t),this.$resultsContainer.html(window.wpcc.an_error_occurred+": "+t.responseText)}).always(()=>{this.setHistoryLoading(!1)}))}onRemoveTestHistoryItem(e){e.preventDefault();let s=t(e.target),i=this.getTestHistoryData(s);null!==i&&(this.setHistoryLoading(!0),t.post(window.ajaxurl,{wcc_nonce:t("#wcc_nonce").val(),action:window.pageActionKey,data:{cmd:"delete_history_item",item:i}}).done(e=>{let s=t(e.view).find(".inside").first();this.$testHistory.find(".inside").html(s.html())}).fail(t=>{console.log(t),this.$resultsContainer.html(window.wpcc.an_error_occurred+": "+t.responseText)}).always(()=>{this.setHistoryLoading(!1)}))}onSubmitTesterForm(e){e.preventDefault();let s=t(e.target),i=s.find(this.inputIdSiteId+" option:selected").val(),o=s.find(this.inputIdTestType+" option:selected").val(),n=s.find(this.inputIdTestUrlPart).val();void 0!=n&&n&&(this.$resultsContainer.html(""),this.$resultsContainer.hasClass("hidden")&&this.$resultsContainer.removeClass("hidden"),this.$resultsContainer.addClass("loading"),t.post(window.ajaxurl,{wcc_nonce:t("#wcc_nonce").val(),action:window.pageActionKey,data:{site_id:i,test_type:o,test_url_part:n}}).done(e=>{this.$resultsContainer.html(e.view.replace(/\[\u0000/g,"[\\").replace(/\u0000/g,":")),this.restoreToggleableStates();let s=t(e.viewTestHistory).find(".inside").first();this.$testHistory.find(".inside").html(s.html()),this.$testHistory.find(".inside").animate({scrollTop:0},"slow"),flashBackground(this.$testHistory.find(".test-history-item:first-child")),this.initializeTooltip()}).fail(t=>{console.log(t),this.$resultsContainer.html(window.wpcc.an_error_occurred+": "+t.responseText)}).always(()=>{this.$resultsContainer.removeClass("loading")}))}getTestHistoryData(t){let e=t.closest(".test-history-item").data("test");return null===e||"undefined"===e||void 0===e?null:e}toggleTestHistory(){this.isTestHistoryHidden?this.showTestHistory():this.hideTestHistory()}hideTestHistory(){let t=this.$testHistory.find(".inside").first(),e=this.$testHistory.find("h2 .toggle").first();t.hasClass("hidden")||(t.addClass("hidden"),e.removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")),this.isTestHistoryHidden=!0}showTestHistory(){let t=this.$testHistory.find(".inside").first(),e=this.$testHistory.find("h2 .toggle").first();t.hasClass("hidden")&&(t.removeClass("hidden"),e.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up")),this.isTestHistoryHidden=!1}initializeTooltip(){t('[data-toggle="tooltip"]').tooltip()}setHistoryLoading(t){let e=this.$testHistory.find("> h2");t?e.addClass("loading"):e.removeClass("loading")}}}).call(this,s(1))},35:function(t,e,s){"use strict";s.r(e),function(t){var e=s(29);t(function(t){new e.a})}.call(this,s(1))}});